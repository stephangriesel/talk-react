(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){},34:function(e,t,n){e.exports=n(76)},39:function(e,t,n){},40:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(30),o=n.n(i),c=(n(39),n(1)),r=n(3),l=n(5),u=n(4),m=n(6),p=(n(40),n(15)),h=n(2),d=n.n(h),g=n(7),f=n(16),E=n(13),v=(n(60),n(61),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).logoutUser=function(){n.service.logout().then(function(){n.setState({loggedInUser:null}),n.props.getUser(null)})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state.title,a=n.state.description,s=n.state.owner;d.a.post("http://localhost:5000/api/topics",{title:t,description:a,owner:s},{withCredentials:!0}).then(function(){n.props.getData(),n.setState({title:"",description:"",owner:""})}).catch(function(e){return console.log(e)})},n.handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(E.a)({},a,s))},n.toggleForm=function(){n.state.isShowing?n.setState({isShowing:!1}):n.setState({isShowing:!0})},n.showAddTopicForm=function(){if(n.state.isShowing)return s.a.createElement("div",{className:"addTopic-wrapper animated bounceInUp"},s.a.createElement("form",{onSubmit:n.handleFormSubmit},s.a.createElement("div",{className:"topicTitle"},s.a.createElement("input",{maxLength:"50",type:"text",name:"title",placeholder:"... start a discussion",value:n.state.title,onChange:function(e){return n.handleChange(e)}})),s.a.createElement("div",{className:"topicDesc"},s.a.createElement("textarea",{maxLength:200,name:"description",value:n.state.description,onChange:function(e){return n.handleChange(e)}})),s.a.createElement("button",{type:"submit",value:"Submit"},"SUBMIT")))},n.state={loggedInUser:null,title:"",description:"",owner:""},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(f.a)({},this.state,{loggedInUser:e.userInSession})),console.log("this is addtopic",this)}},{key:"render",value:function(){var e=this;return this.state.loggedIn,s.a.createElement("div",{className:"addTopic-wrapper"},s.a.createElement("button",{onClick:function(){return e.toggleForm()}},s.a.createElement("i",{className:"far fa-comments"})," Join the discussion"),this.showAddTopicForm())}}]),t}(a.Component)),b=(n(28),function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})};var n=d.a.create({baseURL:"http://localhost:5000/api",withCredentials:!0});this.service=n}),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){n.setState({loggedInUser:e})},n.getAllTopics=function(){d.a.get("http://localhost:5000/api/topics",{withCredentials:!0}).then(function(e){n.setState({listOfTopics:e.data})})},n.state={listOfTopics:[],loggedInUser:null,userinsessionname:n.props.user},n.service=new b,n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"componentDidMount",value:function(){this.getAllTopics()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"topicList-wrapper"},s.a.createElement("div",null,s.a.createElement(v,{userInSession:this.state.loggedInUser,getData:function(){return e.getAllTopics()}})),s.a.createElement("div",{className:"itemCards"},this.state.listOfTopics.map(function(e){return s.a.createElement("div",{key:e._id,className:"topicBox"},s.a.createElement(g.b,{to:"/topics/".concat(e._id)}," ",s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-newspaper"})," ",e.title)),s.a.createElement("p",null,s.a.createElement("i",{className:"far fa-comments"})," ",e.description," "),s.a.createElement("ul",null,e.comments.map(function(e,t){return s.a.createElement("li",{className:"commentText",key:t},s.a.createElement("i",{className:"far fa-comment-dots"})," ",e.title)})))})))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){n.setState({loggedInUser:e})},n.getAllTopics=function(){d.a.get("http://localhost:5000/api/topics",{withCredentials:!0}).then(function(e){n.setState({listOfTopics:e.data})})},n.state={listOfTopics:[],loggedInUser:null,userinsessionname:n.props.user},n.service=new b,n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"componentDidMount",value:function(){this.getAllTopics()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"topicList-wrapper"},s.a.createElement("div",null,s.a.createElement(v,{userInSession:this.state.loggedInUser,getData:function(){return e.getAllTopics()}})),s.a.createElement("div",{className:"itemCards"},this.state.listOfTopics.map(function(e){return s.a.createElement("div",{key:e._id,className:"topicBox"},s.a.createElement(g.b,{to:"/topics/".concat(e._id)}," ",s.a.createElement("h3",null,s.a.createElement("i",{className:"fas fa-newspaper"})," ",e.title," by LoggedInUser")),s.a.createElement("p",null,s.a.createElement("i",{className:"far fa-comments"})," ",e.description," "),s.a.createElement("ul",null,e.comments.map(function(e,t){return s.a.createElement("li",{className:"commentText",key:t},s.a.createElement("i",{className:"far fa-comment-dots"})," ",e.title)})))})))}}]),t}(a.Component),j=(n(70),n(71),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).logMeOut=function(){d()({method:"POST",url:"http://localhost:5000/api/logout",withCredentials:!0}).then(function(e){n.props.logout()}).catch(function(e){console.log(e)})},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"statusMsg"},s.a.createElement("button",{className:"button",onClick:this.logMeOut},"Logout"))}}]),t}(a.Component)),w=function(e){return s.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},e.loggedIn?s.a.createElement(I,e):s.a.createElement(T,e))},T=function(e){return s.a.createElement("div",{className:"insideWrapper"},s.a.createElement("div",{className:"desc"},s.a.createElement(g.b,{to:"/"},"The",s.a.createElement("strong",null,"TALK"))),s.a.createElement("div",{className:"links"},s.a.createElement("ul",null,s.a.createElement("li",{className:"menuItem"},s.a.createElement(g.b,{to:"/login",style:{textDecoration:"none"}},"Login")),s.a.createElement("li",{className:"menuItem"},s.a.createElement(g.b,{to:"/signup",style:{textDecoration:"none"}},"Register")))))},I=function(e){return s.a.createElement("div",{className:"insideWrapper"},s.a.createElement("div",{className:"desc"},s.a.createElement(g.b,{to:"/"},"The",s.a.createElement("strong",null,"TALK"))),s.a.createElement("div",{className:"links"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(j,{logout:e.logout})))))},C=(n(72),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){var t=n.state.title,a=n.state.description;e.preventDefault(),d.a.put("http://localhost:5000/api/topics/".concat(n.props.theTopic._id),{title:t,description:a},{withCredentials:!0}).then(function(){n.props.getTheTopic(),n.props.history.push("/")}).catch(function(e){return console.log(e)})},n.handleChangeTitle=function(e){n.setState({title:e.target.value})},n.handleChangeDesc=function(e){n.setState({description:e.target.value})},n.toggleForm=function(){n.state.isShowing?n.setState({isShowing:!1}):n.setState({isShowing:!0})},n.showEditTopicForm=function(){if(n.state.isShowing)return s.a.createElement("div",{className:"editTopic-wrapper animated bounceInUp"},s.a.createElement("form",{onSubmit:n.handleFormSubmit},s.a.createElement("div",{className:"topicTitle"},s.a.createElement("input",{type:"text",name:"title",value:n.state.title,onChange:function(e){return n.handleChangeTitle(e)}})),s.a.createElement("div",{className:"topicDesc"},s.a.createElement("textarea",{name:"description",value:n.state.description,onChange:function(e){return n.handleChangeDesc(e)}})),s.a.createElement("button",{type:"submit",value:"Submit"},"APPLY CHANGE")))},n.state={title:n.props.theTopic.title,description:n.props.theTopic.description},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"editTopic-wrapper"},s.a.createElement("button",{onClick:function(){return e.toggleForm()}},s.a.createElement("i",{className:"far fa-edit"}),"EDIT YOUR TOPIC"),this.showEditTopicForm())}}]),t}(a.Component)),N=(n(73),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.title,a=n.state.description,s=n.props.theTopic._id;d.a.post("http://localhost:5000/api/comments",{title:t,description:a,topicID:s}).then(function(){n.props.getTheTopic(),n.setState({title:"",description:"",owner:""})}).catch(function(e){return console.log(e)})},n.handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(E.a)({},a,s))},n.toggleForm=function(){n.state.isShowing?n.setState({isShowing:!1}):n.setState({isShowing:!0})},n.showAddCommentForm=function(){if(n.state.isShowing)return s.a.createElement("div",{className:"addCommentBox animated bounceInUp"},s.a.createElement("form",{onSubmit:n.handleFormSubmit},s.a.createElement("div",{className:"commentText"},s.a.createElement("textarea",{type:"text",name:"title",value:n.state.title,onChange:function(e){return n.handleChange(e)}})),s.a.createElement("button",{type:"submit",value:"Submit"},s.a.createElement("i",{className:"fas fa-comment"})," ADD")))},n.state={title:"",description:"",isShowing:!1},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"add-comment"},s.a.createElement("button",{onClick:function(){return e.toggleForm()}},s.a.createElement("i",{className:"far fa-comment"})," Comment "),this.showAddCommentForm())}}]),t}(a.Component)),y=(n(74),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getSingleTopic=function(){var e=n.props.match.params;d()({method:"get",url:"http://localhost:5000/api/topics/".concat(e.id),withCredentials:!0}).then(function(e){var t=e.data;n.setState(t)}).catch(function(e){console.log(e)})},n.renderEditForm=function(){if(n.state.title)return s.a.createElement(C,Object.assign({theTopic:n.state,getTheTopic:n.getSingleTopic},n.props));n.getSingleTopic()},n.deleteTopic=function(){var e=n.props.match.params;d.a.delete("http://localhost:5000/api/topics/".concat(e.id),{withCredentials:!0}).then(function(){n.props.history.push("/topics")}).catch(function(e){console.log(e)})},n.renderAddCommentForm=function(){if(n.state.title)return s.a.createElement(N,{theTopic:n.state,getTheTopic:n.getSingleTopic});n.getSingleTopic()},n.state={},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getSingleTopic()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h1",{className:"uppercaseText"},this.state.title),s.a.createElement("p",{className:"descDetails"},this.state.description),s.a.createElement("p",null,s.a.createElement("i",{className:"fas fa-user"})," ",this.state.owner),this.state.comments&&this.state.comments.length>0&&s.a.createElement("h3",null,"Comments "),this.state.comments&&this.state.comments.map(function(t,n){return s.a.createElement("div",{className:"commentLine",key:n},s.a.createElement("div",null,s.a.createElement("i",{className:"fas fa-comment-dots"})),s.a.createElement(g.b,{to:"/topics/".concat(e.state._id,"/comments/").concat(t._id)},t.title))}),s.a.createElement("div",{className:"commentBtn"},this.renderAddCommentForm()," "),s.a.createElement("div",null,this.renderEditForm())," ",s.a.createElement("div",null,s.a.createElement("button",{className:"btnRed",onClick:function(){return e.deleteTopic()}},"Delete topic")),s.a.createElement("div",{className:"textNav"},s.a.createElement(g.b,{to:"/topics"},s.a.createElement("i",{className:"fas fa-arrow-left"})," Back to topics")))}}]),t}(a.Component)),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTheComment=function(){var e=n.props.match.params;d.a.get("http://localhost:5000/api/topics/".concat(e.id,"/comments/").concat(e.commentId)).then(function(e){var t=e.data;n.setState(t)}).catch(function(e){console.log(e)})},n.state={},n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getTheComment()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,this.state.title),s.a.createElement("p",null,this.state.description),s.a.createElement("p",null,this.state.username),s.a.createElement(g.b,{to:"/topics"},"Back to topics"))}}]),t}(a.Component),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=n.state;d()({method:"post",url:"http://localhost:5000/api/signup",data:t,withCredentials:!0}).then(function(e){n.setState({username:"",password:""}),n.props.getUser(e),n.props.loggedIn({loggedIn:!0,user:e.data}),n.props.history.push("/login")}).catch(function(e){})},n.handleChange=function(e){var t=e.target,a=t.name,s=t.value;n.setState(Object(E.a)({},a,s))},n.state={username:"",password:""},n.service=new b,n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"signupForm"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",null,s.a.createElement("input",{type:"text",onChange:this.handleChange,name:"username",placeholder:"USERNAME",value:this.state.username})),s.a.createElement("div",null,s.a.createElement("input",{type:"password",name:"password",onChange:this.handleChange,placeholder:"PASSWORD",value:this.state.password})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit",value:"Submit"},"SIGN UP"))),s.a.createElement("p",null,this.props.location&&this.props.location.state?this.props.location.state.message:"")," ")}}]),t}(a.Component),D=(n(75),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.handleSubmit=function(e){e.preventDefault();var t=n.state;d()({method:"post",url:"http://localhost:5000/api/login",data:t,withCredentials:!0}).then(function(e){var t=e.data;n.props.loggedIn({loggedIn:!0,user:t}),n.props.history.push("/topics")}).catch(function(e){n.props.history.push({pathname:"/login",state:{message:"Incorrect, please try again"}})})},n.state={username:"",password:""},n.service=new b,n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loginForm"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",null,s.a.createElement("input",{type:"text",name:"username",onChange:this.handleChange,placeholder:"USERNAME",value:this.state.username})),s.a.createElement("div",null,s.a.createElement("input",{type:"password",onChange:this.handleChange,name:"password",placeholder:"PASSWORD",value:this.state.password})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit",value:"Submit"},"LOG IN"))),s.a.createElement("p",null,this.props.location&&this.props.location.state?this.props.location.state.message:"")," ")}}]),t}(a.Component)),F=n(33),A=function(e){var t=e.component,n=e.user,a=Object(F.a)(e,["component","user"]);return console.log(Object(f.a)({component:t,user:n},a)),s.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?s.a.createElement(t,Object.assign({},e,{loggedInUser:n})):s.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}})}}))},x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).loggedIn=function(e){var t=e.loggedIn,a=e.user;n.setState({loggedIn:t,user:a}),localStorage.setItem("state",JSON.stringify(e))},n.logout=function(){n.setState({user:{},loggedIn:!1}),localStorage.setItem("state","{}")},n.getTheUser=function(e){n.setState({loggedInUser:e})},n.state={loggedInUser:null,user:{}},n.service=new b,n}return Object(m.a)(t,e),Object(r.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"componentDidMount",value:function(){this.setState(JSON.parse(localStorage.getItem("state")))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("section",null,s.a.createElement("div",{className:"container"},s.a.createElement(w,Object.assign({},this.state,{logout:this.logout})))),s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",render:function(t){return s.a.createElement(S,Object.assign({test:"test"},t,{user:e.state.user,userInSession:e.state.loggedInUser,getUser:e.getTheUser}))}}),s.a.createElement(p.b,{path:"/login",render:function(t){return s.a.createElement(D,Object.assign({},t,{loggedIn:e.loggedIn}))}}),s.a.createElement(p.b,{path:"/signup",render:function(t){return s.a.createElement(k,Object.assign({},t,{loggedIn:e.loggedIn}))}}),s.a.createElement(p.b,{user:this.state.loggedInUser,path:"/topics/:id",component:y})," ",s.a.createElement(p.b,{path:"/logout",render:function(t){return s.a.createElement(j,Object.assign({},t,{user:e.state.loggedInUser}))}}),s.a.createElement(A,{user:this.state.user,userInSession:this.state.loggedInUser,getUser:this.getTheUser,path:"/topics",component:O}),s.a.createElement(A,{user:this.state.loggedInUser,path:"/topics/:id/comments/:commentId",test:"test",component:U})))}}]),t}(a.Component);o.a.render(s.a.createElement(g.a,null,s.a.createElement(x,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.ecf35930.chunk.js.map